<!doctype html>
<html lang="vi">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>ƒê·ªçc b√†i ‚Ä¢ Math Hub</title>

  <link rel="icon" type="image/png" href="favicon.png">
  <link rel="stylesheet" href="style.css" />

  <!-- MathJax (1 l·∫ßn th√¥i) -->
  <script>
    window.MathJax = {
      tex: {
        inlineMath: [['\\(','\\)'], ['$', '$']],
        displayMath: [['\\[','\\]']]
      }
    };
  </script>
  <script defer src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml.js"></script>
</head>

<body>
  <div class="bg-aurora"></div>
  <canvas id="bg"></canvas>

  <header class="topbar">
    <div class="inner">
      <div class="brand">
        <div class="logo"><img src="favicon.png" alt="logo"></div>
        <div>Math Hub</div>
      </div>

      <nav class="navlinks">
        <a class="pill" href="index.html">Trang ch·ªß</a>
        <a class="pill" href="algebra.html">ƒê·∫°i s·ªë</a>
        <a class="pill" href="combi.html">T·ªï h·ª£p</a>
        <a class="pill" href="geo.html">H√¨nh h·ªçc</a>
        <a class="pill" href="nt.html">S·ªë h·ªçc</a>
      </nav>
    </div>
  </header>

  <main class="wrap">
    <section class="panel pagehead">
      <div class="left">
        <h1 id="postTitle">ƒêang t·∫£i b√†i...</h1>
        <p id="postMeta" style="margin:8px 0 0; opacity:.75;"></p>
      </div>
      <div class="badge"><span class="dot"></span> <span id="catName">...</span></div>
    </section>

    <section class="panel section">
      <div class="post" id="postContent"></div>

      <div style="margin-top:14px;">
        <a class="btn ghost" id="backLink" href="index.html">‚Üê Quay l·∫°i</a>
      </div>
    </section>

    <footer>¬© 2025 ‚Ä¢ Math Hub</footer>
  </main>

  <script src="app.js"></script>
  <script>
    if (window.MathHub?.initParticles) MathHub.initParticles();
  </script>

  <!-- Load data c·ªßa c·∫£ 4 m·∫£ng ƒë·ªÉ view.html ƒë·ªçc ƒë∆∞·ª£c m·ªçi cat -->
  <script src="posts-algebra.js"></script>
  <script src="posts-combi.js"></script>
  <script src="posts-geo.js"></script>
  <script src="posts-nt.js"></script>

  <script>
    const params = new URLSearchParams(location.search);
    const cat = (params.get("cat") || "algebra").toLowerCase();
    const id  = (params.get("id")  || "").trim();

    const CAT = {
      algebra: { name: "ƒê·∫°i s·ªë", page: "algebra.html", theme: "theme-algebra", data: () => window.POSTS_ALGEBRA || [] },
      combi:   { name: "T·ªï h·ª£p",  page: "combi.html",   theme: "theme-combi",   data: () => window.POSTS_COMBI   || [] },
      geo:     { name: "H√¨nh h·ªçc",page: "geo.html",     theme: "theme-geo",     data: () => window.POSTS_GEO     || [] },
      nt:      { name: "S·ªë h·ªçc",  page: "nt.html",      theme: "theme-nt",      data: () => window.POSTS_NT      || [] },
    };

    const cfg = CAT[cat] || CAT.algebra;

    // set theme cho body
    document.body.className = cfg.theme;

    // set nh√£n + back link
    document.getElementById("catName").textContent = cfg.name;
    const back = document.getElementById("backLink");
    back.href = cfg.page;
    back.textContent = "‚Üê Quay l·∫°i " + cfg.name;

    // t√¨m b√†i
    const data = cfg.data();
    const post = data.find(p => String(p.id) === String(id));

    const titleEl = document.getElementById("postTitle");
    const metaEl  = document.getElementById("postMeta");
    const contEl  = document.getElementById("postContent");

    if (!id) {
      titleEl.textContent = "Thi·∫øu id üòÖ";
      metaEl.textContent  = "V√≠ d·ª• ƒë√∫ng: view.html?cat=algebra&id=001";
      contEl.innerHTML    = "<p>H√£y m·ªü t·ª´ trang danh s√°ch b√†i ƒë·ªÉ link t·ª± ƒë√∫ng.</p>";
    } else if (!post) {
      titleEl.textContent = "Kh√¥ng t√¨m th·∫•y b√†i üòÖ";
      metaEl.textContent  = "Ki·ªÉm tra l·∫°i id=... ho·∫∑c cat=...";
      contEl.innerHTML    = `<p>V√≠ d·ª• ƒë√∫ng: <code>view.html?cat=${cat}&id=001</code></p>`;
    } else {
      titleEl.textContent = post.title;
      // n·∫øu b·∫°n ch∆∞a mu·ªën show level/tags th√¨ c√≥ th·ªÉ ƒë·ªÉ tr·ªëng d√≤ng d∆∞·ªõi
      metaEl.textContent  = [post.level, ...(post.tags||[])].filter(Boolean).join(" ‚Ä¢ ");
      contEl.innerHTML    = post.content || "<p>(Ch∆∞a c√≥ n·ªôi dung)</p>";
    }

    // typeset MathJax sau khi nh√©t HTML
    window.addEventListener("load", () => {
      if (window.MathJax?.typesetPromise) MathJax.typesetPromise();
    });
  </script>
</body>
</html>
